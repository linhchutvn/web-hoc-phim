<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Web học tiếng Anh (Google Drive)</title>
    <style>
        body { display: flex; height: 100vh; margin: 0; font-family: sans-serif; background: #222; color: white; }
        
        /* CỘT TRÁI: VIDEO */
        #video-container { flex: 2; display: flex; justify-content: center; align-items: center; background: black; }
        video { width: 100%; max-height: 100vh; box-shadow: 0 0 20px rgba(0,0,0,0.5); }

        /* CỘT PHẢI: PHỤ ĐỀ */
        #transcript { flex: 1; overflow-y: auto; padding: 0; background: #fff; color: #333; border-left: 1px solid #444; }
        
        .line { padding: 15px; border-bottom: 1px solid #eee; cursor: pointer; transition: 0.2s; }
        .line:hover { background: #f5f5f5; }
        
        /* Hiệu ứng khi câu thoại đang được đọc */
        .line.active { background: #e6f7ff; border-left: 5px solid #007bff; }
        
        .en { font-weight: bold; font-size: 16px; color: #000; display: block; margin-bottom: 5px; }
        .vi { font-size: 14px; color: #666; font-style: italic; }
    </style>
</head>
<body>

    <div id="video-container">
        <!-- QUAN TRỌNG: Dán Link Google Drive "thần thánh" vào src bên dưới -->
        <video id="myVideo" controls playsinline>
            <!-- Ví dụ: ID file của bạn thay vào chỗ ID_CUA_BAN -->
            <source src="https://drive.google.com/WupN3kKoknK1yAraJADgq7jsY3IEj/" type="video/mp4">
            Trình duyệt của bạn không hỗ trợ thẻ video.
        </video>
    </div>

    <div id="transcript">
        <!-- Nội dung sẽ được Javascript tạo ra -->
    </div>

<script>
    // 1. DỮ LIỆU PHỤ ĐỀ (Bạn cần nhập đúng giây bắt đầu/kết thúc)
    // Ví dụ đoạn phim Friends
    const subtitles = [
        { start: 0, end: 3, en: "So you want to tell us now?", vi: "Vậy cậu muốn kể cho bọn tớ nghe bây giờ không?" },
        { start: 3.5, end: 6, en: "Or are we waiting for four wet bridesmaids?", vi: "Hay là đợi thêm 4 phù dâu ướt sũng nữa?" },
        { start: 6.5, end: 10, en: "Oh god... well, it started about a half hour before the wedding.", vi: "Ôi trời... chà, chuyện bắt đầu khoảng nửa tiếng trước đám cưới." },
        { start: 10.5, end: 14, en: "I was in this room with all the presents...", vi: "Tớ đang ở trong phòng với tất cả đống quà cưới..." }
    ];

    const video = document.getElementById('myVideo');
    const transcriptDiv = document.getElementById('transcript');

    // 2. HIỂN THỊ DANH SÁCH RA MÀN HÌNH
    subtitles.forEach((sub, index) => {
        const div = document.createElement('div');
        div.className = 'line';
        div.id = 'line-' + index;
        div.innerHTML = `<span class="en">${sub.en}</span><span class="vi">${sub.vi}</span>`;
        
        // Click vào dòng nào -> Video nhảy tới đó
        div.onclick = () => {
            video.currentTime = sub.start;
            video.play();
        };
        transcriptDiv.appendChild(div);
    });

    // 3. ĐỒNG BỘ: VIDEO CHẠY -> SÁNG ĐÈN
    video.addEventListener('timeupdate', () => {
        const currentTime = video.currentTime;
        
        subtitles.forEach((sub, index) => {
            const lineDiv = document.getElementById('line-' + index);
            if (currentTime >= sub.start && currentTime <= sub.end) {
                // Chỉ xử lý nếu dòng đó chưa được active
                if (!lineDiv.classList.contains('active')) {
                    // Xóa hết active cũ
                    document.querySelectorAll('.active').forEach(el => el.classList.remove('active'));
                    // Active dòng mới
                    lineDiv.classList.add('active');
                    // Tự động cuộn xuống
                    lineDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
        });
    });
</script>

</body>
</html>
